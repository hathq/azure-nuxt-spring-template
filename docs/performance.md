# PERFORMANCE.md

## パフォーマンス・軽量化戦略

このプロジェクトでは、ビルドとランタイムの両面でパフォーマンスを向上させるため、軽量な環境を活用しています。

### コンテナイメージの軽量化

- **Alpineベースイメージ**: `node:18-alpine`, `eclipse-temurin:17-jdk-alpine`  
  コンパクトなベースイメージにより、ビルド時間・プル時間を短縮
- **マルチステージビルド**:  
  ビルド用ステージでMavenやnpmインストールを行い、最終ステージでは実行に必要なバイナリのみをコピーしてイメージサイズを削減
- **Distrolessイメージの利用**:  
  JavaランタイムなどをDistrolessイメージに置き換え可能で、攻撃対象領域とサイズを最小化

### ビルドキャッシュ

- GitHub Actionsの`actions/cache`を利用し、Maven依存関係やNode.jsパッケージをキャッシュ  
- Docker BuildKitを有効活用し、レイヤーキャッシュを有効にすることで再ビルドを高速化

### Nuxt.jsのSSG利用

- NuxtをSSG(静的サイト生成)して、フロントエンドは単純な静的ファイル配信  
- SSR不要の場合、Nginx Alpineイメージで静的ファイルをホスティングし、軽量で高速なレスポンス

### オートスケール

- Azure App Serviceの自動スケーリング機能でトラフィック増減に応じてインスタンスを動的調整  
- Application Insightsと連動して負荷を監視し、必要時にスケールアウト

### ログ・トレース最適化

- Application Insightsでパフォーマンス計測、ボトルネック特定  
- 不要なログ出力を抑制し、ログ量を軽減して解析コスト低減

### 継続的改善

- プロファイリングツールでアプリケーションのCPU・メモリ使用を監視  
- ボトルネック特定後、キャッシュ戦略やコーディング改善でさらなる高速化

これらの戦略により、アプリケーションビルド時間短縮、起動時間短縮、リソース消費削減が期待できます。
